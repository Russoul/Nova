//////////// Type Theory: Extensional MLTT /////////////
We have:
 * Empty type: ğŸ˜
 * Unit type: ğŸ™
 * Dependent product type: Î 
 * Dependent sum type: Î£
 * Equality type: (â‰¡) with reflection
 * Indexed quotient-inductive types
 * One universe (doesn't contain inductive types yet)

TODO:
 * inductive types in the universe
 * induction-induction
 * induction-recursion
 * co-inductive types
 * stronger universes


/////////////// Notes /////////////////

* Element relation is defined on types quotiented by the equivalence relation
* TODO: references


//////////// Presentation /////////////

//Context
Î“, Î”, Î ::= Îµ | Î“ (x : A)

//Telescope
Î“, Î”, Î ::= Îµ | (x : A) Î“

//Substitution
Ïƒ, Ï„ ::= Â· | Ïƒ, t | Ïƒ âˆ˜ Ï„ | â†‘ | id

//Inductive schema
ğ’¦ ::= Îµ | ğ’¦, â„“ : ğ’ | ğ’¦, ğ’â¼ | ğ’¦(Ïƒ)

//Inductive schema type
ğ’œ, ğ“‘ ::= Î  (x : A) ğ“‘ | ğ’³(eÌ„) | ğ’œ(Ïƒ)

//Inductive schema element
ğ“œ, ğ’© ::= Î»x.ğ“œ | ğ“œ e | Intro â„“ eÌ„ ğ’©Ì… | ğ“œ(Ïƒ) | x

//Inductive schema context
Ï´ ::= Îµ | Ï´ ğ’œ

//Inductive schema point-constructor
ğ’ ::= (Î, Î¾.Ï´, Î¾.IÌ…) | ğ’(Ïƒ)

//Inductive schema equality-constructor
ğ’â¼ ::= (Î, Î¾.Ï´, Î¾.IÌ…, Î¾.Î¸.ğ“œ, Î¾.Î¸.ğ’©) | ğ’(Ïƒ)

//Inductive schema elimination
ğ›† ::= Îµ | ğ›†, â„“ : Î¾.Î·.Ï.e

//Type
A, B, C, T ::= ğŸ˜ | ğŸ™ | ğ•Œ | Î  (x : A) B | Î£ (x : A) B | (aâ‚€ â‰¡ aâ‚ âˆˆ A) | El(a) | Ind Î” ğ’¦ IÌ… | A(Ïƒ)

//Element
a, b, c, t, f, e ::= ğŸ˜-elim t
                   | ()
                   | ğŸ˜
                   | ğŸ™
                   | Î  (x : a) b
                   | Î£ (x : a) b
                   | (aâ‚€ â‰¡ aâ‚ âˆˆ t)
                   | Î»x.f
                   | f e
                   | (a, b)
                   | t.Ï€â‚
                   | t.Ï€â‚‚
                   | Refl
                   | x
                   | Intro â„“ Î” ğ’¦ eÌ„â‚€ eÌ„â‚
                   | Elim Î” ğ’¦ Î´.h.A IÌ… t ğ›†
                   | t(Ïƒ)

//Spine
eÌ„, tÌ„, IÌ… ::= Â· | eÌ„ e

//List
eÌ„, tÌ„, IÌ… ::= Â· | e eÌ„

// data â„• where
//   Z : â„•
//   (x : â„•) âŠ¦ S(x) : â„•
//
// data â„¤ where
//   (x : â„•) âŠ¦ -x : â„¤
//   (x : â„•) âŠ¦ +x : â„¤
//   -0 = +0 : â„¤
//
// inc : â„¤ â†’ â„¤
// inc (-0) = +1
// inc (-S(x)) = -x
// inc (+x) = +(S(x))
// inc (-0) = inc (+0) : â„¤
//    =          =
//    +1    =    +1
//
// (A : ğ•Œ) âŠ¦
//  data List where
//    [] : List
//    (x : A) (xs : List) âŠ¦ (x :: xs) : List
//
// (A : ğ•Œ) âŠ¦
//   data (n : â„•) âŠ¦ Vect where
//     [] : Vect 0
//     (n : â„•) (x : A) (xs : Vect n) âŠ¦ (x :: xs) : Vect S(n)
//
// (A : ğ•Œ) (aâ‚€ : A) âŠ¦
//   data (x : A) âŠ¦ Eq where
//     Refl : Eq aâ‚€
//
// A : ğ•Œ
// aâ‚€ : A
// (x : A) (h : Eq A aâ‚€ x) âŠ¦ C type
// r : C(aâ‚€, Refl)
// aâ‚ : A
// a : Eq A aâ‚€ aâ‚
// -------------------------------
// Eq-elim x.h.C r aâ‚ a : C(aâ‚, a)
// Eq-elim x.h.C r aâ‚€ Refl = r
//
// e : Eq A aâ‚€ aâ‚
// -----------------------------------------------
// Eq-elim (x.h. Eq A x aâ‚€) Refl aâ‚ e : Eq A aâ‚ aâ‚€
//
//
// (A : ğ•Œ) (R : A â†’ A â†’ ğ•Œ) âŠ¦
//   data A/R where
//     (x : A) âŠ¦ [x] : A/R
//     (x : A) (y : A) (r : El(R x y)) âŠ¦ [x] = [y] : A/R
//
// data â„•â‚‚ where
//  (x : â„•) âŠ¦ [x] : â„•â‚‚
//  (x : â„•) âŠ¦ [x] = [x + 2] : â„•â‚‚
//
// data â„•âˆ where
//   0 : â„•âˆ
//   (x : â„•) âŠ¦ S(x) : â„•âˆ
//   âˆ : â„•âˆ
//   S(âˆ) = âˆ : â„•âˆ
//
//(f : X â†’ A) (g : X â†’ B) âŠ¦
//  data Pushout where
//    (x : A) âŠ¦ Left(x) : Pushout
//    (y : B) âŠ¦ Right(y) : Pushout
//    (x : X) âŠ¦ Left (f x) = Right (g x) : Pushout
//
// Induction-induction required below
//
// data (n : â„•) âŠ¦ Even where
//    ZeroEven : Even 0
//    (o : Odd n) âŠ¦ Next : Even S(n)
//
// data (n : â„•) âŠ¦ Odd where
//    OneOdd : Odd 1
//    (e : Even n) âŠ¦ Next : Odd S(n)
//
// (A : ğ•Œ) âŠ¦
//    data Poset where
//      (x : A) âŠ¦ Inj(x) : Poset
//      (x y : Poset) (x â‰¤ y) (y â‰¤ x) âŠ¦ x = y : Poset
//    data (x : Poset) (y : Poset) âŠ¦ x â‰¤ y where
//      Refl : x â‰¤ x
//      (x y z : Poset) (p : x â‰¤ y) (q : y â‰¤ z) âŠ¦ p âˆ™ q : x â‰¤ z
//


/////// Judgement forms /////////

Î“ âŠ¦ Î” á… ğ’¦

Î“ âŠ¦ Î” ğ’¦ á… ğ’

Î“ ctx

Î“ ctx
---------
Î“ âŠ¦ Î” tel

Î“ âŠ¦ Î”â‚€ tel
Î“ âŠ¦ Î”â‚ tel
---------------
Î“ âŠ¦ Î”â‚€ = Î”â‚ tel

Î“ ctx
----------
Î“ âŠ¦ A type

Î“ âŠ¦ Aâ‚€ type
Î“ âŠ¦ Aâ‚ type
----------------
Î“ âŠ¦ Aâ‚€ = Aâ‚ type

Î“ âŠ¦ A type
----------
Î“ âŠ¦ a : A

Î“ âŠ¦ Î” tel
---------
Î“ âŠ¦ eÌ„ : Î”

Î“ âŠ¦ aâ‚€ : A
Î“ âŠ¦ aâ‚ : A
---------------
Î“ âŠ¦ aâ‚€ = aâ‚ : A

Î“ ctx
Î” ctx
---------
Ïƒ : Î“ â‡’ Î”

Ïƒ : Î“ â‡’ Î”
Ï„ : Î“ â‡’ Î”
-------------
Ïƒ = Ï„ : Î“ â‡’ Î”

Î“ âŠ¦ Î” tel
---------
Î“ âŠ¦ Î” á… ğ’¦

Î“ âŠ¦ Î” á… ğ’¦
-----------
Î“ âŠ¦ Î” ğ’¦ á… ğ’

Î“ âŠ¦ Î” á… ğ’¦
-----------
Î“ âŠ¦ Î” ğ’¦ á… ğ’â¼

Î“ âŠ¦ Î” tel
-----------------
Î“ âŠ¦ Î” á… ğ’œ atype

Î“ âŠ¦ Î” tel
----------------
Î“ âŠ¦ Î” á… Ï´ actx

Î“ âŠ¦ Î” á… ğ’œ
-----------------
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : ğ’œ

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… Ï´' actx
-----------------
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œÌ… : Ï´'

Î“ âŠ¦ Î” á… ğ’¦
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
----------------------------------
Î“ âŠ¦ Î” á… ğ›† : ğ’¦ â‡€ Î´.h.C

Î“ âŠ¦ Î” á… ğ’¦
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
----------------------------------
Î“ âŠ¦ Î” á… ğ›† : ğ’¦ â†’ Î´.h.C
    Defined as (Î” á… ğ›† : ğ’¦ â‡€ Î´.h.C) and |ğ›†| = |ğ’¦|

///////// Inference rules (ctx) //////////

Îµ ctx

Î“ ctx
Î“ âŠ¦ A type
-------------
Î“ (x : A) ctx

///////// Inference rules (tel) //////////

Î“ âŠ¦ ctx
---------
Î“ âŠ¦ Îµ tel

Î“ A âŠ¦ Î” tel
-----------------
Î“ âŠ¦ (x : A) Î” tel

///////// Inference rules (type) //////////

ğŸ˜ type

ğŸ™ type

ğ•Œ type

Î“ âŠ¦ a : ğ•Œ
--------------
Î“ âŠ¦ El(a) type

Î“ âŠ¦ A type
Î“ (x : A) âŠ¦ B type
------------------
Î“ âŠ¦ Î  (x : A) B type

Î“ âŠ¦ A type
Î“ (x : A) âŠ¦ B type
------------------
Î“ âŠ¦ Î£ (x : A) B type

Î“ âŠ¦ aâ‚€ : A
Î“ âŠ¦ aâ‚ : A
----------------------
Î“ âŠ¦ (aâ‚€ â‰¡ aâ‚ âˆˆ A) type

Î“ âŠ¦ A type
Ïƒ : Î” â‡’ Î“
-------------
Î” âŠ¦ A(Ïƒ) type

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ IÌ… : Î”
------------------
Î“ âŠ¦ Ind Î” ğ’¦ IÌ… type

/////////// Inference rules (type equality) ////////////

ğŸ˜ = ğŸ˜ type

ğŸ™ = ğŸ™ type

ğ•Œ = ğ•Œ type

Î“ âŠ¦ El(ğŸ˜) = ğŸ˜ type

Î“ âŠ¦ El(ğŸ™) = ğŸ™ type

Î“ âŠ¦ a : ğ•Œ
Î“ (x : El(a)) âŠ¦ b : ğ•Œ
----------------------------------
Î“ âŠ¦ El(Î  (x : a) b) = Î  (x : El(a)) El(b) type

Î“ âŠ¦ a : ğ•Œ
Î“ (x : El(a)) âŠ¦ b : ğ•Œ
----------------------------------
Î“ âŠ¦ El(Î£ (x : a) b) = Î£ (x : El(a)) El(b) type

Î“ âŠ¦ t : ğ•Œ
Î“ âŠ¦ aâ‚€ : El(t)
Î“ âŠ¦ aâ‚ : El(t)
--------------------------------------------
Î“ âŠ¦ El(aâ‚€ â‰¡ aâ‚ âˆˆ t) = (aâ‚€ â‰¡ aâ‚ âˆˆ El(t)) type

Î“ âŠ¦ Aâ‚€ = Aâ‚ type
Î“ (x : Aâ‚€) âŠ¦ Bâ‚€ = Bâ‚ type
--------------------------------------
Î“ âŠ¦ Î  (x : Aâ‚€) Bâ‚€ = Î  (x : Aâ‚) Bâ‚ type

Î“ âŠ¦ Aâ‚€ = Aâ‚ type
Î“ (x : Aâ‚€) âŠ¦ Bâ‚€ = Bâ‚ type
--------------------------------------
Î“ âŠ¦ Î£ (x : Aâ‚€) Bâ‚€ = Î£ (x : Aâ‚) Bâ‚ type

Î“ âŠ¦ A = B type
Î“ âŠ¦ aâ‚€ = bâ‚€ : A
Î“ âŠ¦ aâ‚ = bâ‚ : A
--------------------------------------
Î“ âŠ¦ (aâ‚€ â‰¡ aâ‚ âˆˆ A) = (bâ‚€ â‰¡ bâ‚ âˆˆ B) type

Ïƒ : Î” â‡’ Î“
------------
Î” âŠ¦ ğŸ˜(Ïƒ) = ğŸ˜

Ïƒ : Î” â‡’ Î“
------------
Î” âŠ¦ ğŸ™(Ïƒ) = ğŸ™

Ïƒ : Î” â‡’ Î“
-----------------------------
Î” âŠ¦ (Î  A B)(Ïƒ) = Î  A(Ïƒ) B(Ïƒâº)

Ïƒ : Î” â‡’ Î“
-----------------------------
Î” âŠ¦ (Î£ A B)(Ïƒ) = Î£ A(Ïƒ) B(Ïƒâº)

Ïƒ : Î” â‡’ Î“
---------------------------------------------
Î” âŠ¦ (aâ‚€ â‰¡ aâ‚ âˆˆ A)(Ïƒ) = (aâ‚€(Ïƒ) â‰¡ aâ‚(Ïƒ) âˆˆ A(Ïƒ))

Ïƒ : Î” â‡’ Î“
Ï„ : Î â‡’ Î”
...........................
Î âŠ¦ A(Ïƒ)(Ï„) = A(Ïƒ âˆ˜ Ï„) type

///////// Inference rules (elem) //////////

Î“ âŠ¦ t : ğŸ˜
----------------
Î“ âŠ¦ ğŸ˜-elim t : A

Î“ âŠ¦ () : ğŸ™

Î“ âŠ¦ ğŸ˜ : ğ•Œ

Î“ âŠ¦ ğŸ™ : ğ•Œ

Î“ âŠ¦ A : ğ•Œ
Î“ El(A) âŠ¦ B : ğ•Œ
---------------
Î“ âŠ¦ Î  A B : ğ•Œ

Î“ âŠ¦ A : ğ•Œ
Î“ El(A) âŠ¦ B : ğ•Œ
---------------
Î“ âŠ¦ Î£ A B : ğ•Œ

Î“ âŠ¦ t : ğ•Œ
Î“ âŠ¦ aâ‚€ : El(t)
Î“ âŠ¦ aâ‚ : El(t)
---------------------
Î“ âŠ¦ (aâ‚€ â‰¡ aâ‚ âˆˆ t) : ğ•Œ

Î“ A âŠ¦ f : B
--------------
Î“ âŠ¦ Î»f : Î  A B

Î“ âŠ¦ f : Î  A B
Î“ âŠ¦ e : A
------------------
Î“ âŠ¦ f e : B(id, e)

Î“ A âŠ¦ B type
Î“ âŠ¦ a : A
Î“ âŠ¦ b : B(id, a)
------------------
Î“ âŠ¦ (a, b) : Î£ A B

Î“ âŠ¦ t : Î£ A B
-------------
Î“ âŠ¦ t.Ï€â‚ : A

Î“ âŠ¦ t : Î£ A B
----------------------
Î“ âŠ¦ t.Ï€â‚‚ : B(id, t.Ï€â‚)

Î“ âŠ¦ aâ‚€ : A
Î“ âŠ¦ aâ‚ : A
-------------------
Î“ âŠ¦ aâ‚€ â‰¡(A) aâ‚ type

Î“ âŠ¦ a : A
----------------------
Î“ âŠ¦ Refl : (a â‰¡ a âˆˆ A)

Î“ A âŠ¦ xâ‚€ : A(â†‘)

Î“ âŠ¦ xáµ¢ : T
-----------------
Î“ A âŠ¦ xáµ¢â‚Šâ‚ : T(â†‘)

Î“ âŠ¦ t : A
Ïƒ : Î” â‡’ Î“
---------------
Î” âŠ¦ t(Ïƒ) : A(Ïƒ)

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ ğ’¦[â„“] = (Î, Ï´, Î³.IÌ…)
Î“ âŠ¦ eÌ„â‚€ : Î
Î“ âŠ¦ eÌ„â‚ : â¦ƒÏ´â¦„(Î´. Ind Î” Î´)
-----------------------------------------
Î“ âŠ¦ Intro â„“ Î” ğ’¦ eÌ„â‚€ eÌ„â‚ : Ind Î” ğ’¦ IÌ…(eÌ„â‚€/Î³)

Î“ âŠ¦ Î” á… ğ’¦
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
Î“ âŠ¦ IÌ… : Î”
Î“ âŠ¦ t : Ind Î” ğ’¦ IÌ…
Î“ âŠ¦ Î” á… ğ›† : ğ’¦ â†’ Î´.h.C
--------------------------------------
Î“ âŠ¦ Elim Î” ğ’¦ Î´.h.C IÌ… t ğ›† : C(IÌ…/Î´, t/h)

///////// Inference rules (elem equality) //////////

Î“ âŠ¦ t : ğŸ™
--------------
Î“ âŠ¦ t = () : ğŸ™

Î“ A âŠ¦ f : B
Î“ âŠ¦ e : A
---------------------------------
Î“ âŠ¦ (Î» f) e = f(id, e) : B(id, e)

Î“ âŠ¦ f : Î  A B
------------------------
Î“ âŠ¦ Î» (f xâ‚€) = f : Î  A B

Î“ A âŠ¦ B type
Î“ âŠ¦ a : A
Î“ âŠ¦ b : B(id, a)
---------------------
Î“ âŠ¦ (a, b).Ï€â‚ = a : A

Î“ A âŠ¦ B type
Î“ âŠ¦ a : A
Î“ âŠ¦ b : B(id, a)
----------------------------
Î“ âŠ¦ (a, b).Ï€â‚‚ = b : B(id, a)

Î“ âŠ¦ t : Î£ A B
----------------------------
Î“ âŠ¦ (t.Ï€â‚, t.Ï€â‚‚) = t : Î£ A B

Î“ âŠ¦ e : (aâ‚€ â‰¡ aâ‚ âˆˆ A)
---------------------
Î“ âŠ¦ aâ‚€ = aâ‚ : A

Î“ âŠ¦ e : (aâ‚€ â‰¡ aâ‚ âˆˆ A)
----------------------------
Î“ âŠ¦ e = Refl : (aâ‚€ â‰¡ aâ‚€ âˆˆ A)

Î“ âŠ¦ A ctx
Ïƒ : Î” â‡’ Î“
Î” âŠ¦ t : A(Ïƒ)
-----------------------
Î” âŠ¦ xâ‚€(Ïƒ, t) = t : A(Ïƒ)

Î“ âŠ¦ xáµ¢ : B
-------------------------
Î“ A âŠ¦ xáµ¢(â†‘) = xáµ¢â‚Šâ‚ : B(â†‘)

Ïƒ : Î” â‡’ Î“
Ï„ : Î â‡’ Î”
Î“ âŠ¦ A type
---------------------------------
Î âŠ¦ t(Ïƒ)(Ï„) = t(Ïƒ âˆ˜ Ï„) : A(Ïƒ âˆ˜ Ï„)

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ ğ’¦[â„“] = (Î, Î¾.Ï´, Î¾.IÌ…, Î¾.Î¸.ğ“œâ‚€, Î¾.Î¸.ğ“œâ‚)
Î“ âŠ¦ eÌ„ : Î
Î“ âŠ¦ tÌ„ : Î” ğ’¦ á… â¦ƒÏ´(eÌ„)â¦„
----------------------------------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ‚€(eÌ„)â¦„(tÌ„) = Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ‚(eÌ„)â¦„(tÌ„) : Ind Î” ğ’¦ IÌ…(eÌ„)

Î“ âŠ¦ Î” á… ğ’¦
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
Î“ âŠ¦ IÌ… : Î”
Î“ âŠ¦ ğ’¦[â„“] = (Î, Î¾.Ï´, Î¾.IÌ…â‚€)
Î“ âŠ¦ eÌ„ : Î
Î“ âŠ¦ tÌ„ : Î” ğ’¦ á… â¦ƒÏ´(eÌ„)â¦„
//By typing: Î“ âŠ¦ IÌ…â‚€(eÌ„) = IÌ… : Î”
//By typing: Î“ (Î¾ : Î) (Î· : Î” ğ’¦ á… â¦ƒÏ´â¦„) (Ï : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, Î·)) âŠ¦ ğ›†[â„“] : C(IÌ…â‚€, Intro â„“ Î” ğ’¦ Î¾ Î·)
--------------------------------------------------------------------------------------------------------
Î“ âŠ¦ Elim Î” ğ’¦ Î´.h.C IÌ… (Intro â„“ Î” ğ’¦ eÌ„ tÌ„) ğ›† = ğ›†[â„“](eÌ„, tÌ„, Î” ğ’¦ á… act(Î´.h.C, Ï´(eÌ„), tÌ„)) : C(IÌ…, Intro â„“ Î” ğ’¦ eÌ„ tÌ„)

///////// Inference rules (substitution) //////////

Î“ ctx
---------
Â· : Î“ â‡’ Îµ

Î“ ctx
----------
id : Î“ â‡’ Î“

Î“ A ctx
-----------
â†‘ : Î“ A â‡’ Î“

Ïƒ : Î” â‡’ Î“
Ï„ : Î â‡’ Î”
-------------
Ïƒ âˆ˜ Ï„ : Î â‡’ Î“

Ïƒ : Î” â‡’ Î“
Î“ âŠ¦ A type
Î” âŠ¦ t : A(Ïƒ)
--------------
Ïƒ, t : Î” â‡’ Î“ A

///////// Inference rules (substitution equality) //////////

Î“ ctx
Ïƒ : Î“ â‡’ Îµ
-------------
Ïƒ = Â· : Î“ â‡’ Îµ

Ïƒ : Î“ â‡’ Î”
------------------
Ïƒ âˆ˜ id = Ïƒ : Î“ â‡’ Î”

Ïƒ : Î“ â‡’ Î”
------------------
id âˆ˜ Ïƒ = Ïƒ : Î“ â‡’ Î”

Ïƒâ‚â‚€ : Î“â‚ â‡’ Î“â‚€
Ïƒâ‚‚â‚ : Î“â‚‚ â‡’ Î“â‚
Ïƒâ‚ƒâ‚‚ : Î“â‚ƒ â‡’ Î“â‚‚
-----------------------------------------------
Ïƒâ‚â‚€ âˆ˜ (Ïƒâ‚‚â‚ âˆ˜ Ïƒâ‚ƒâ‚‚) = (Ïƒâ‚â‚€ âˆ˜ Ïƒâ‚‚â‚) âˆ˜ Ïƒâ‚ƒâ‚‚ : Î“â‚ƒ â‡’ Î“â‚€

Ïƒ : Î” â‡’ Î“
Î“ âŠ¦ A type
Î” âŠ¦ t : A(Ïƒ)
----------------------
â†‘ âˆ˜ (Ïƒ, t) = Ïƒ : Î” â‡’ Î“

Ï„ : Î“â‚€ â‡’ Î“â‚
Ïƒ : Î“â‚ â‡’ Î“â‚‚
Î“â‚‚ âŠ¦ A type
Î“â‚ âŠ¦ t : A(Ïƒ)
--------------------------------------
(Ïƒ, t) âˆ˜ Ï„ = (Ïƒ âˆ˜ Ï„, t(Ï„)) : Î“â‚€ â‡’ Î“â‚‚ A

///////// Inference rules (inductive schema) //////////

Î“ âŠ¦ Î” á… Îµ

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” ğ’¦ á… ğ’
------------------
Î“ âŠ¦ Î” á… (ğ’¦, â„“ : ğ’)

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” ğ’¦ á… ğ’â¼
------------------
Î“ âŠ¦ Î” á… (ğ’¦, â„“ : ğ’â¼)

///////// Inference rules (inductive point-constructor) //////////

Î“ âŠ¦ Î tel
Î“ Î âŠ¦ Î” á… Ï´
Î“ Î âŠ¦ eÌ„ : Î”
-------------------
Î“ âŠ¦ Î” ğ’¦ á… (Î, Ï´, eÌ„)

///////// Inference rules (inductive equality-constructor) //////////

Î“ âŠ¦ Î tel
Î“ Î âŠ¦ Î” á… Ï´ actx
Î“ Î âŠ¦ eÌ„ : Î”
Î“ Î Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : ğ’³(eÌ„)
Î“ Î Ï´ âŠ¦ Î” ğ’¦ á… ğ’© : ğ’³(eÌ„)
------------------------------
Î“ âŠ¦ Î” ğ’¦ á… (Î, Ï´, eÌ„, ğ“œ, ğ’©)

///////// Inference rules (actx) //////////

Î“ âŠ¦ Î” á… Îµ actx

Î“ âŠ¦ Î” á… Ï´ actx
Î“ âŠ¦ Î” á… ğ’œ atype
------------------
Î“ âŠ¦ Î” á… Ï´ ğ’œ actx

///////// Inference rules (atype) //////////

Î“ âŠ¦ A type
Î“ A âŠ¦ Î” á… ğ“‘ atype
---------------------
Î“ âŠ¦ Î” á… Î  A ğ“‘ atype

Î“ âŠ¦ eÌ„ : Î”
---------------------
Î“ âŠ¦ Î” á… ğ’³(eÌ„) atype

///////// Inference rules (aelem) //////////


Î“ A Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : ğ“‘
----------------------
Î“ Ï´ âŠ¦ Î” ğ’¦ á… Î»ğ“œ : Î  A ğ“‘

Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : Î  A ğ“‘
Î“ âŠ¦ e : A
--------------------------
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ e : ğ“‘(id, e)

Î“ âŠ¦ ğ’¦[â„“] = (Î, Ï´', IÌ…)
Î“ âŠ¦ eÌ„ : Î
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ’©Ì… : Ï´'
------------------------------------
Î“ Ï´ âŠ¦ Î” ğ’¦ á… Intro â„“ eÌ„ ğ’©Ì… : ğ’³ IÌ…(id, eÌ„)

Î“ Ï´ ğ’œ âŠ¦ Î” ğ’¦ á… xâ‚€ : ğ’œ

Î“ Ï´ âŠ¦ Î” ğ’¦ á… xáµ¢ : ğ“‘
----------------------
Î“ Ï´ ğ’œ âŠ¦ Î” ğ’¦ á… xáµ¢â‚Šâ‚ : ğ“‘

///////// Inference rules (elimination) //////////

Î“ âŠ¦ Î” á… Îµ : ğ’¦ â‡€ Î´.h.C

Î“ âŠ¦ Î” á… ğ›† : ğ’¦ â‡€ Î´.h.C
Î“ âŠ¦ ğ’¦[â„“] = (Î, Î¾.Ï´, Î¾.IÌ…)
Î“ (Î¾ : Î) (Î· : Î” ğ’¦ á… â¦ƒÏ´â¦„) (Ï : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, Î·)) âŠ¦ e : C(IÌ…/Î´, Intro â„“ Î” ğ’¦ Î¾ Î·/h)
-----------------------------------------------------------------------------------
Î“ âŠ¦ Î” á… ğ›†, â„“ : Î¾.Î·.Ï.e : ğ’¦ â‡€ Î´.h.C

Î“ âŠ¦ Î” á… ğ›† : ğ’¦ â‡€ Î´.h.C
Î“ âŠ¦ ğ’¦[â„“] = (Î, Î¾.Ï´, Î¾.IÌ…, Î¾.Î¸.ğ“œâ‚€, Î¾.Î¸.ğ“œâ‚)
Î“ (Î¾ : Î) (Î· : Î” ğ’¦ á… â¦ƒÏ´â¦„) (Ï : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, Î·)) âŠ¦
   (Î” ğ’¦ á… â¦‡Î¸.ğ“œâ‚€â¦ˆ(Î´.h.C, Î·, Ï, ğ›†)) = (Î” ğ’¦ á… â¦‡Î¸.ğ“œâ‚â¦ˆ(Î´.h.C, Î·, Ï, ğ›†)) : C(IÌ…, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ‚€â¦„(Î·))
//Î“ Î Ï´ âŠ¦ Î” ğ’¦ á… ğ“œâ‚€ : ğ’³(IÌ…)
//Î” ğ’¦ á… â¦‡ğ’³(IÌ…)â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ‚€â¦„(Î·))
//  =
//C(IÌ…, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ‚€â¦„(Î·))
-----------------------------------------------------------------------
Î“ âŠ¦ Î” á… ğ›†, â„“ : Î¾.Î·.Ï.e : ğ’¦ â‡€ Î´.h.C


///////// Interpretations //////////

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… ğ’œ atype
-------------------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦ƒğ’œâ¦„ type
    Î” ğ’¦ á… â¦ƒÎ  (x : A) ğ“‘â¦„ = Î  (x : A) (Î” ğ’¦ á… â¦ƒğ“‘â¦„)
    Î” ğ’¦ á… â¦ƒğ’³(IÌ…)â¦„ = Ind Î” ğ’¦ IÌ…

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… Ï´ ctx
-----------------
Î“ âŠ¦ Î” ğ’¦ á… â¦ƒÏ´â¦„ tel
    Î” ğ’¦ á… â¦ƒÎµâ¦„ = Îµ
    Î” ğ’¦ á… â¦ƒÏ´ ğ’œâ¦„ = (Î” ğ’¦ á… â¦ƒÏ´â¦„) (Î” ğ’¦ á… â¦ƒğ’œâ¦„)

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… ğ’œ atype
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : ğ’œ
Î“ âŠ¦ eÌ„ : Î” ğ’¦ á… â¦ƒÏ´â¦„
------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„) : Î” ğ’¦ á… â¦ƒğ’œâ¦„
    Î” ğ’¦ á… â¦ƒÎ¸. Î»x.fâ¦„(eÌ„) = Î»x. Î” ğ’¦ á… â¦ƒÎ¸.fâ¦„(eÌ„) : Î  (x : A) (Î” ğ’¦ á… â¦ƒğ“‘â¦„)
    Î” ğ’¦ á… â¦ƒÎ¸. ğ“œ eâ¦„(eÌ„) = (Î” ğ’¦ á… â¦ƒÎ¸. ğ“œâ¦„(eÌ„)) e : ğ“‘
    //ğ’¦[â„“] = (Î, Ï´', Î¾.IÌ…)
    Î” ğ’¦ á… â¦ƒÎ¸. Intro â„“ eÌ„â‚€ ğ’©Ì…â¦„(eÌ„) = Intro â„“ Î” ğ’¦ eÌ„â‚€ (Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„)) : Ind Î” ğ’¦ IÌ…(eÌ„â‚€/Î¾)
    //Ï´ = Ï´â‚€ ğ’œ Ï´â‚
    Î” ğ’¦ á… â¦ƒÎ¸. xáµ¢â¦„(eÌ„â‚€, eáµ¢, eÌ„â‚) = eáµ¢ : Î” ğ’¦ á… â¦ƒğ’œâ¦„

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… Ï´' actx
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ’©Ì… : Ï´'
Î“ âŠ¦ eÌ„ : Î” ğ’¦ á… â¦ƒÏ´â¦„
-------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„) : Î” ğ’¦ á… â¦ƒÏ´'â¦„
    Î” ğ’¦ á… â¦ƒÎ¸.Â·â¦„(eÌ„) : Îµ
    Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì… ğ’©â¦„(eÌ„) = (Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„)) (Î” ğ’¦ á… â¦ƒÎ¸.ğ’©â¦„(eÌ„)) : (Î” ğ’¦ á… â¦ƒÏ´'â¦„) (Î” ğ’¦ á… â¦ƒğ’œâ¦„)


Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… ğ’œ atype
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
Î“ âŠ¦ e : Î” ğ’¦ á… â¦ƒğ’œâ¦„
----------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, e) type
    Î” ğ’¦ á… â¦‡ğ’³(eÌ„)â¦ˆ(Î´.h.C, e) = C(eÌ„/Î´, e)
    Î” ğ’¦ á… â¦‡Î  (x : A) ğ“‘â¦ˆ(Î´.h.C, e) = Î  (x : A) (Î” ğ’¦ á… â¦‡ğ“‘â¦ˆ(Î´.h.C, e x))

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… Ï´ actx
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
Î“ âŠ¦ eÌ„ : Î” ğ’¦ á… â¦ƒÏ´â¦„
----------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, eÌ„) tel
    Î” ğ’¦ á… â¦‡Îµâ¦ˆ(Î´.h.C, eÌ„) = Îµ
    Î” ğ’¦ á… â¦‡Ï´ ğ’œâ¦ˆ(Î´.h.C, (eÌ„, e)) = (Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, eÌ„)) (Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, e))

Î“ âŠ¦ Î” á… ğ’œ atype
Î“ âŠ¦ Î” á… Ï´ actx
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œ : ğ’œ
Î“ âŠ¦ eÌ„â‚€ : Î” ğ’¦ á… â¦ƒÏ´â¦„
Î“ âŠ¦ eÌ„â‚ : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, eÌ„â‚€)
Î“ âŠ¦ ğ›† : ğ’¦ â†’ Î´.h.C
-------------------------------------------------------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦‡Î¸.ğ“œâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) : Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„â‚€))
    //ğ’œ = Î  (x : A) ğ“‘
    Î” ğ’¦ á… â¦‡Î¸.Î»x.fâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) = Î»x. Î” ğ’¦ á… â¦‡Î¸.fâ¦ˆ(Î´.h.C, eâ‚€, eâ‚, ğ›†) : Î  (x : A) (Î” ğ’¦ á… â¦‡ğ“‘â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.fâ¦„(eÌ„â‚€)))
    //ğ“œ : Î  (x : A) ğ“‘
    //We have: ğ“‘(a/x) = ğ’œ
    //Expected type: Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œ aâ¦„(eÌ„â‚€))
    //                   =
    //               Î” ğ’¦ á… â¦‡ğ“‘(a/x)â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œ aâ¦„(eÌ„â‚€))
    //                   =
    //               Î” ğ’¦ á… â¦‡ğ“‘(a/x)â¦ˆ(Î´.h.C, (Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„â‚€)) a)
    //â¦‡Î¸.ğ“œâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) : Î  (x : A) (Î” ğ’¦ á… â¦‡ğ“‘â¦ˆ(Î´.h.C, (Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„â‚€)) x))
    //Got type: Î” ğ’¦ á… â¦‡ğ“‘(a/x)â¦ˆ(Î´.h.C, (Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„â‚€)) a)
    Î” ğ’¦ á… â¦‡Î¸.ğ“œ aâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) = â¦‡Î¸.ğ“œâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) a

    //ğ’¦[â„“] = (Î, Ï´', Î¾.IÌ…')
    //eÌ„ : Î
    //ğ’©Ì… : Ï´'
    //ğ›†[â„“] = Î³.Î·.Ï.e :
    //Expected type: â¦‡ğ’³(IÌ…'(eÌ„/Î¾))â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.Intro â„“ eÌ„ ğ’©Ì…â¦„(eÌ„â‚€))
                        =
                     â¦‡ğ’³(IÌ…'(eÌ„/Î¾))â¦ˆ(Î´.h.C, Intro â„“ Î” ğ’¦ eÌ„ (Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„â‚€)))
                        =
                     C(IÌ…'(eÌ„/Î¾), Intro â„“ Î” ğ’¦ eÌ„ (Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„â‚€)))
    Î” ğ’¦ á… â¦‡Î¸.Intro â„“ eÌ„ ğ’©Ì…â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†)
           =
         e(eÌ„, Î” ğ’¦ á… â¦ƒğ’©Ì…â¦„(eÌ„â‚€) : Î” ğ’¦ á… â¦ƒÏ´'â¦„, â¦‡Î¸.ğ’©Ì…â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) : Î” ğ’¦ á… â¦‡Ï´'â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ’©Ì…â¦„(eÌ„â‚€)))

    //eÌ„â‚€ = eÌ„â‚€â‚€ eâ‚€áµ¢ eÌ„â‚€â‚
    //eÌ„â‚ = eÌ„â‚â‚€ eâ‚áµ¢ eÌ„â‚â‚
    //eâ‚áµ¢ : Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, eâ‚€áµ¢)
    //Ï´ = Ï´â‚€ ğ’œ Ï´â‚
    //Expected type:
    //Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, eâ‚€áµ¢)
    Î” ğ’¦ á… â¦‡Î¸.xáµ¢â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) = eâ‚áµ¢


Î“ âŠ¦ Î” á… Ï´' actx
Î“ âŠ¦ Î” á… Ï´ actx
Î“ Ï´ âŠ¦ Î” ğ’¦ á… ğ“œÌ… : Ï´'
Î“ âŠ¦ eÌ„â‚€ : Î” ğ’¦ á… â¦ƒÏ´â¦„
Î“ âŠ¦ eÌ„â‚ : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, eÌ„â‚€)
Î“ âŠ¦ ğ›† : ğ’¦ â†’ Î´.h.C
-------------------------------------------------------------------------------
Î“ âŠ¦ Î” ğ’¦ á… â¦‡Î¸.ğ“œÌ…â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) : Î” ğ’¦ á… â¦‡Ï´'â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œÌ…â¦„(eÌ„â‚€))
    Î” ğ’¦ á… â¦‡Î¸.Â·â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†) = Â· : Îµ
    Î” ğ’¦ á… â¦‡Î¸.ğ“œÌ… ğ“œâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†)
      =
    (â¦‡Î¸.ğ“œÌ…â¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†)) (â¦‡Î¸.ğ“œâ¦ˆ(Î´.h.C, eÌ„â‚€, eÌ„â‚, ğ›†)) : (Î” ğ’¦ á… â¦‡Ï´'â¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œÌ…â¦„(eÌ„â‚€))) (Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, Î” ğ’¦ á… â¦ƒÎ¸.ğ“œâ¦„(eÌ„â‚€)))

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… ğ’œ actx
Î“ âŠ¦ t : Î” ğ’¦ á… â¦ƒğ’œâ¦„
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
----------------------------------
Î“ âŠ¦ Î” ğ’¦ á… act(Î´.h.C, ğ’œ, t) : Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, t)
    Î” ğ’¦ á… act(Î´.h.C, Î  (x : A) ğ“‘, t) = Î»x. Î” ğ’¦ á… act(ğ“‘, t x) : Î  (x : A) (Î” ğ’¦ á… â¦‡ğ“‘â¦ˆ(Î´.h.C, t x))
    Î” ğ’¦ á… act(Î´.h.C, ğ’³(IÌ…), t) = Elim Î” ğ’¦ Î´.h.C IÌ… t : C(IÌ…, t)

Î“ âŠ¦ Î” á… ğ’¦
Î“ âŠ¦ Î” á… Ï´ actx
Î“ âŠ¦ tÌ„ : Î” ğ’¦ á… â¦ƒÏ´â¦„
Î“ (Î´ : Î”) (h : Ind Î” ğ’¦ Î´) âŠ¦ C type
----------------------------------
Î“ âŠ¦ Î” ğ’¦ á… act(Î´.h.C, Ï´, tÌ„) : Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, tÌ„)
    Î” ğ’¦ á… act(Î´.h.C, Îµ, Â·) = Â· : Îµ
    Î” ğ’¦ á… act(Î´.h.C, Ï´ ğ’œ, tÌ„ t) = (Î” ğ’¦ á… act(Î´.h.C, Ï´, tÌ„)) (Î” ğ’¦ á… act(Î´.h.C, ğ’œ, t)) : (Î” ğ’¦ á… â¦‡Ï´â¦ˆ(Î´.h.C, tÌ„)) (Î” ğ’¦ á… â¦‡ğ’œâ¦ˆ(Î´.h.C, t))

